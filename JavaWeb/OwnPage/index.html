<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人中心</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/common-less(1).css">
    <link rel="stylesheet" href="css/common-less.css">
    <link rel="stylesheet" href="css/moco.min.css">
    <link rel="icon" href="img/logo.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/profile-less.css">
</head>
<body>
<div class="tips"></div>
    <div id="header">
        <div class="page-container" id="nav">
            <ul class="nav-item">
                <li><a href="../main/index.html"  target="_self">V家首页</a></li>
                <li><a href="../shop/index.html"  target="_self">购物中心</a></li>
            </ul>
            <div id="login-area">
                <ul class="clearfix logined">
                    <li><a>订单详情</a></li>
                    <li class="my_message"><a target="_blank">我的消息</a></li>
                    <li class="set_btn user-card-box" id='header-user-card'>
                        <a id="header-avator" class="user-card-item js-header-avator" target="_self">
<!--                            <img src="img/logo.png" width="40" height="40">-->
                            <canvas id="right-top" width="40" height="40"></canvas>
                            <span style="display: none;">动态提醒</span>
                        </a>
                        <div class="g-user-card"></div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div id="main">
        <div class="page-settings">
            <div class="top">
                <div class="w960 mauto top_title">
                    <p>个人中心</p>
                </div>
            </div>
            <div class="setting pb10">
                <div class="nav-tabs pa">
                    <h class="baseinfo fl active">基本信息</h>
                    <a href="../cart/index.html" class="countinfo fl">购物车</a>
                    <div class="cb"></div>
                </div>
                <div class="contentBox">
                    <div class="formBox">
                        <div id="setting-profile" class="setting-wrap setting-profile">
                            <div class="wlfg-wrap clearfix ">
                                <label class="label-name">头像：</label>
                                <div class="rlf-group">
                                    <div class="fl ml20 pr">
                                        <div id="avator-btns" class="avator-btn-inner">
                                            <div class="avator-btn-wrap">
                                                <div class="con4">
                                                    <canvas id="cvs" width="100" height="100"></canvas>
                                                    <span class="btn upload">上传头像<input type="file" class="upload_pic" id="upload" /></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cb"></div>
                                    <p class="rlf-tip-wrap errorHint color-red" ></p>
                                </div>
                            </div>
                            <form id="profile" >
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name" for="nick" >ID：</label>
                                    <div class="rlf-group">
                                        <input type="text" name="nickname" id="nick" data-validate="require-nick"  class="username moco-form-control" placeholder="请输入用户名" value=""/>
                                        <p class="rlf-tip-wrap errorHint color-red" ></p>
                                    </div>
                                </div>
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name" for="nick" >密码：</label>
                                    <div class="rlf-group">
                                        <input type="password" name="nickname" id="nick" data-validate="require-nick"  class="pwd moco-form-control" placeholder="请输入密码" value=""/>
                                        <p class="rlf-tip-wrap errorHint color-red" ></p>
                                    </div>
                                </div>
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name" for="nick" >收货地址：</label>
                                    <div class="rlf-group">
                                        <input type="text" name="nickname" id="nick"  data-validate="require-nick"  class="moco-form-control"/>
                                        <p class="rlf-tip-wrap errorHint color-red" ></p>
                                    </div>
                                </div>
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name" for="nick" >联系电话：</label>
                                    <div class="rlf-group">
                                        <input type="tel" name="nickname" id="nick" data-validate="require-nick"  class="moco-form-control"/>
                                        <p class="rlf-tip-wrap errorHint color-red" ></p>
                                    </div>
                                </div>
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name h16 lh16" >性别：</label>
                                    <div class="rlf-group rlf-radio-group">
                                        <label  class="lh16"><input type="radio" value="0"   name="sex">保密</label>
                                        <label  class="lh16"><input type="radio" value="1"  name="sex">男</label>
                                        <label  class="lh16"><input type="radio" value="2" checked="checked" name="sex">女</label>
                                        <p class="rlf-tip-wrap errorHint color-red"></p>
                                    </div>
                                </div>
                                <div class="wlfg-wrap clearfix">
                                    <label class="label-name" for="profile-submit"></label>
                                    <div class="rlf-group">
                                        <span id="profile-submit" class="rlf-btn-green btn-block profile-btn">保存</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="js/jquery-2.1.1.min.js"></script>
<script>
    //获取上传按钮
    var input1 = document.getElementById("upload");
    if(typeof FileReader === 'undefined') {
        //result.innerHTML = "抱歉，你的浏览器不支持 FileReader";
        input1.setAttribute('disabled', 'disabled');
    } else {
        input1.addEventListener('change', readFile, false);
    }
    function readFile() {
        var file = this.files[0]; //获取上传文件列表中第一个文件
        if(!/image\/\w+/.test(file.type)) {
            //图片文件的type值为image/png或image/jpg
            alert("文件必须为图片！");
            return false;
        }
        // console.log(file);
        var reader = new FileReader(); //实例一个文件对象
        reader.readAsDataURL(file); //把上传的文件转换成url
        // console.log(reader.readAsDataURL(file))
        //当文件读取成功便可以调取上传的接口
        reader.onload = function(e) {
            var image = new Image();
            // 设置src属性
            image.src = e.target.result;
            var max = 100;
            // 绑定load事件处理器，加载完成后执行，避免同步问题
            image.onload = function() {
                // 获取 canvas DOM 对象
                var canvas = document.getElementById("cvs");
                let can=document.getElementById("right-top");
                // 获取 canvas的 2d 环境对象,
                var ctx = canvas.getContext("2d");
                let cmm=can.getContext("2d");
                // canvas清屏
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                cmm.clearRect(0,0,can.width,can.height);
                cmm.drawImage(image,0,0,40,40);
                ctx.drawImage(image, 0, 0, 100, 100);
            };
        }
    }
</script>
<script>
    //将用户注册页面输入的信息传递到用户的个人中心并显示在相应的位置上。
    let user=document.querySelector(".username");
    let password=document.querySelector(".pwd");
    function getLocal(){
        let data=localStorage.getItem("info");
        if(data!=null)
        {
            return JSON.parse(data);
        }
        else
        {
            return [];
        }
    }
    const cakeMes=[];
    var s=getLocal();
    for(let k in s){
        const obj=s[k];
        for (let i in obj){
            cakeMes.push(obj[i]);
        }
    }
    user.value=cakeMes[0];
    password.value=cakeMes[1];
</script>
<script>
    let btnInfo=$(".tips");
    btnInfo.hide();
    let btn=$(".profile-btn");
    btn.on('click',function () {
        btnInfo.fadeIn().html('保存成功！');
        setTimeout(function () {
            btnInfo.fadeOut();
        },2000);
    })
</script>
</body>
</html>